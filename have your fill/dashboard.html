<!DOCTYPE html>
<html>

<head>
  <link rel="icon" type="image/png" href="images/powbuttongreen.png">
  <title>have your fill</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/app.css">
  <meta charset="utf-8" />
  <script type="text/javascript">
    var canvas, ctx, flag = false,
      prevX = 0,
      currX = 0,
      prevY = 0,
      currY = 0,
      dot_flag = false;

    var x = "black",
      y = 2;

    function init() {
      canvas = document.getElementById('can');
      ctx = canvas.getContext("2d");
      w = canvas.width;
      h = canvas.height;

      canvas.addEventListener("mousemove", function (e) {
        findxy('move', e)
      }, false);
      canvas.addEventListener("mousedown", function (e) {
        findxy('down', e)
      }, false);
      canvas.addEventListener("mouseup", function (e) {
        findxy('up', e)
      }, false);
      canvas.addEventListener("mouseout", function (e) {
        findxy('out', e)
      }, false);
    }

    function color(obj) {
      switch (obj.id) {
        case "grey":
          x = "grey";
          break;
        case "green":
          x = "green";
          break;
        case "blue":
          x = "blue";
          break;
        case "red":
          x = "red";
          break;
        case "yellow":
          x = "yellow";
          break;
        case "orange":
          x = "orange";
          break;
        case "black":
          x = "black";
          break;
        case "white":
          x = "white";
          break;
        case "purple":
          x = "purple";
          break;
        case "pink":
          x = "pink";
          break;
        case "brown":
          x = "brown";
          break;
      }
      if (x == "white") y = 14;
      else y = 2;

    }

    function draw() {
      ctx.beginPath();
      ctx.moveTo(prevX, prevY);
      ctx.lineTo(currX, currY);
      ctx.strokeStyle = x;
      ctx.lineWidth = y;
      ctx.stroke();
      ctx.closePath();
    }

    function erase() {
      var m = confirm("it never happened!");
      if (m) {
        ctx.clearRect(0, 0, w, h);
        document.getElementById("canvasimg").style.display = "none";
      }
    }

    function save() {
      document.getElementById("canvasimg").style.border = "2px solid";
      var dataURL = canvas.toDataURL();
      document.getElementById("canvasimg").src = dataURL;
      document.getElementById("canvasimg").style.display = "inline";
      string.repeat([2]);

    }

    function findxy(res, e) {
      if (res == 'down') {
        prevX = currX;
        prevY = currY;
        currX = e.clientX - canvas.offsetLeft;
        currY = e.clientY - canvas.offsetTop;

        flag = true;
        dot_flag = true;
        if (dot_flag) {
          ctx.beginPath();
          ctx.fillStyle = x;
          ctx.fillRect(currX, currY, 2, 2);
          ctx.closePath();
          dot_flag = false;
        }
      }
      if (res == 'up' || res == "out") {
        flag = false;
      }
      if (res == 'move') {
        if (flag) {
          prevX = currX;
          prevY = currY;
          currX = e.clientX - canvas.offsetLeft;
          currY = e.clientY - canvas.offsetTop;
          draw();
        }
      }
    }
  </script>
</head>

<body>
  <header>
    <h1>have your fill</h1>
  </header>
  <div class="grid">
    <div class="column toolkit">
      <div class="palette">
        <div style="top:4%; left:4%;" class="color" id="color-green" rel="green"></div>
        <div style="top:14%; left:50%;" class="color" id="color-red" rel="red"></div>
        <div style="top:26%; left:7%;" class="color" id="color-yellow" rel="yellow"></div>
        <div style="top:15%; left:9%;" class="color" id="color-orange" rel="orange"></div>
      </div>
      <div id="green"></div>

    </div>
    <div class="column canvas">
      <canvas></canvas>
    </div>
    <div class="column actions">
      <div class="set">
        <button id="bt-save" onclick="save()">Save</button>
        <button id="bt-clear" onclick="erase()">Erase</button>
      </div>
    </div>
  </div>

  <!-- move to the palette
        <div style="position:absolute;top:17%;left:11%;width:70px;height:70px;border-radius:40px;background:black;" id="black" onclick="color(this)"></div>
        <div style="position:absolute;top:33%;left:8%;width:70px;height:70px;border-radius:40px;background:purple;" id="purple" onclick="color(this)"></div>
        <div style="position:absolute;top:41%;left:6%;width:70px;height:70px;border-radius:40px;background:pink;" id="pink" onclick="color(this)"></div>
        <div style="position:absolute;top:20%;left:8%;width:70px;height:70px;border-radius:40px;background:brown;" id="brown" onclick="color(this)"></div>
        <div style="position:absolute;top:46%;left:5%;width:70px;height:70px;border-radius:40px;background:grey;" id="grey" onclick="color(this)"></div>
      -->


  <!-- <canvas id="can" width="248" height="351" style="position:center;top:10%;left:10%;border:2px solid;"></canvas>
        <input type="button" value="clear" id="clr" onclick="erase()">
      <div style="position:absolute;top:26%;left:3%;width:70px;height:70px;border-radius:40px;background:green;" id="green" onclick="color(this)"></div>
      <div style="position:absolute;top:34%;left:4%;width:70px;height:70px;border-radius:40px;background:blue;" id="blue" onclick="color(this)"></div>
      <div style="position:absolute;top:26%;left:7%;width:70px;height:70px;border-radius:40px;background:red;" id="red" onclick="color(this)"></div>
      <div style="position:absolute;top:15%;left:9%;width:70px;height:70px;border-radius:40px;background:yellow;" id="yellow" onclick="color(this)"></div>
      <div style="position:absolute;top:18%;left:5%;width:70px;height:70px;border-radius:40px;background:orange;" id="orange" onclick="color(this)"></div>
      <div style="position:absolute;top:17%;left:11%;width:70px;height:70px;border-radius:40px;background:black;" id="black" onclick="color(this)"></div>
      <div style="position:absolute;top:33%;left:8%;width:70px;height:70px;border-radius:40px;background:purple;" id="purple" onclick="color(this)"></div>
      <div style="position:absolute;top:41%;left:6%;width:70px;height:70px;border-radius:40px;background:pink;" id="pink" onclick="color(this)"></div>
      <div style="position:absolute;top:20%;left:8%;width:70px;height:70px;border-radius:40px;background:brown;" id="brown" onclick="color(this)"></div>
      <div style="position:absolute;top:46%;left:5%;width:70px;height:70px;border-radius:40px;background:grey;" id="grey" onclick="color(this)"></div>
      <img id="canvasimg" style="position:absolute;top:10%;left:55%;" style="display:none;">
      <div style="position:absolute;bottom:27%;left:11%;width:50px;height:50px;background:white;border-top:2px solid black;border-left:2px solid black;border-right:2px solid black;border-bottom:2px solid black;";" id="white" onclick="color(this)"></div>
      <input type="button" value="save" id="btn" onclick="save()" style="position:absolute;bottom:3%;right:3%;color:white;background:black;">
      <input type="button" value="clear" id="clr" onclick="erase()" style="position:absolute;bottom:7%;right:3%;color:white;background:black;" >
      -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="scripts/app.js" type="text/javascript"></script>
</body>

</html>